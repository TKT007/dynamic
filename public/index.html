<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Teste de Deploy Vercel</title>
</head>
<body>
  <h1>Teste de Deploy Vercel</h1>

  <label for="tokenInput">Token Vercel:</label><br />
  <input type="text" id="tokenInput" style="width: 300px;" placeholder="Cole seu token aqui" /><br /><br />

  <button onclick="testarConexao()">Testar Conexão / Deploy</button>

  <div id="resultado" style="margin-top: 20px;"></div>

  <script>
    async function testarConexao() {
      const token = document.getElementById('tokenInput').value.trim();
      const resultadoDiv = document.getElementById('resultado');
      resultadoDiv.textContent = 'Enviando requisição...';

      if (!token) {
        resultadoDiv.textContent = 'Por favor, insira um token válido.';
        return;
      }

      try {
        const response = await fetch('/api/deploy', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            vercelToken: token,
            projectName: 'nome-do-seu-projeto', // ajuste aqui seu projeto
          }),
        });

        const data = await response.json();

        if (response.ok) {
          resultadoDiv.innerHTML = `<strong>Deploy realizado!</strong><br />URL: <a href="${data.url}" target="_blank">${data.url}</a>`;
        } else {
          resultadoDiv.innerHTML = `<strong>Erro na requisição:</strong> ${data.error || JSON.stringify(data)}`;
        }
      } catch (err) {
        resultadoDiv.textContent = 'Erro ao chamar a API: ' + err.message;
      }
    }
  </script>
</body>
</html>
